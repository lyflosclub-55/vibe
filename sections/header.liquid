<header class="header" id="header">
    <nav class="nav">
        <ul class="nav-links">
            {% for link in linklists[section.settings.menu].links %}
                <li><a href="{{ link.url }}">{{ link.title }}</a></li>
            {% endfor %}
        </ul>
        <a href="{{ routes.root_url }}" class="logo">
            {% if section.settings.logo != blank %}
                <img src="{{ section.settings.logo | image_url: width: 200 }}" 
                     alt="{{ shop.name }}" 
                     style="max-width: {{ section.settings.logo_width }}px; height: auto;">
            {% else %}
                <img src="{{ 'logo.png' | asset_url }}" 
                     alt="{{ shop.name }}" 
                     style="max-width: {{ section.settings.logo_width }}px; height: auto;"
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <span style="display:none;">{{ shop.name }}</span>
            {% endif %}
        </a>
        <div class="nav-actions">
            <form action="{{ routes.search_url }}" method="get" role="search" class="search-form">
                <button type="submit" class="icon-btn search-btn" aria-label="Search">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                </button>
            </form>
            
            {% if shop.customer_accounts_enabled %}
                <a href="{% if customer %}{{ routes.account_url }}{% else %}{{ routes.account_login_url }}{% endif %}" class="icon-btn profile-btn" aria-label="Profile">
                    <img src="{{ 'community_member_1769635541984.png' | asset_url }}" alt="Profile" class="profile-avatar">
                </a>
            {% endif %}

            <a href="{{ routes.cart_url }}" class="cart-btn">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z" />
                </svg>
                <span>{{ cart.item_count }} product{% unless cart.item_count == 1 %}s{% endunless %}</span>
            </a>
        </div>
    </nav>
</header>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "range",
      "id": "logo_width",
      "min": 50,
      "max": 300,
      "step": 10,
      "default": 150,
      "unit": "px",
      "label": "Logo width"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    }
  ]
}
{% endschema %}
